/* ==============================================
   App Layout - Core Structure
   ============================================== */

.app {
  height: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
  background: transparent;
  background-image: var(--wallpaper-url);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  overflow: hidden;
  position: relative;
  
  /* Dynamic border radius based on settings */
  --radius-none: 0px;
  --radius-small: 6px;
  --radius-medium: 12px;
  --radius-large: 18px;
}

/* Border radius variants */
.app[data-radius="none"] { --radius: var(--radius-none); --radius-sm: 0px; }
.app[data-radius="small"] { --radius: var(--radius-small); --radius-sm: 4px; }
.app[data-radius="medium"] { --radius: var(--radius-medium); --radius-sm: 8px; }
.app[data-radius="large"] { --radius: var(--radius-large); --radius-sm: 12px; }

/* Font family variants */
.app[data-font="system"] { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
.app[data-font="inter"] { font-family: 'Inter', -apple-system, sans-serif; }
.app[data-font="roboto"] { font-family: 'Roboto', -apple-system, sans-serif; }
.app[data-font="jetbrains"] { font-family: 'JetBrains Mono', monospace; }

/* Animations disabled */
.app[data-animations="false"] * {
  animation-duration: 0s !important;
  transition-duration: 0s !important;
}

/* Block scroll when modal or sidebar is open */
.app.modal-open {
  overflow: hidden !important;
}

.app::before {
  content: '';
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, var(--wallpaper-dim, 20%));
  backdrop-filter: blur(var(--wallpaper-blur, 0px));
  -webkit-backdrop-filter: blur(var(--wallpaper-blur, 0px));
  pointer-events: none;
  z-index: 0;
}

/* When modal/history/downloads is open - slightly dim background */
.app.modal-open::before {
  background: rgba(0, 0, 0, 0.35);
}

.app > * {
  position: relative;
  z-index: 1;
}

.browser-shell {
  flex: 1;
  display: flex;
  overflow: hidden;
  padding: 8px;
  gap: 8px;
  min-height: 0;
}

/* Main area order based on sidebar position */
.app[data-sidebar-position="left"] .main-area {
  order: 1;
}

.app[data-sidebar-position="right"] .main-area {
  order: 0;
}

.main-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0;
  min-width: 0;
  background: rgba(40, 40, 45, 0.65);
  backdrop-filter: blur(40px);
  -webkit-backdrop-filter: blur(40px);
  border-radius: var(--radius);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  position: relative;
  z-index: 1;
}

.content-area {
  flex: 1;
  display: flex;
  overflow: hidden;
  min-height: 0;
}

/* Hide title bar - we use sidebar controls now */
.title-bar {
  display: none;
}
